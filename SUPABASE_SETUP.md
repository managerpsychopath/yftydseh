# üóÑÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Supabase –¥–ª—è Telegram Stars Bot

## ‚ùå –ù–ï –ù–£–ñ–ù–û –∑–∞–ø–æ–ª–Ω—è—Ç—å —ç—Ç–∏ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –¥–ª—è Supabase:

\`\`\`env
# ‚ùå –≠—Ç–∏ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –ù–ï –ù–£–ñ–ù–´ –¥–ª—è Supabase!
POSTGRES_URL=postgresql://user:password@host:port/database
POSTGRES_PRISMA_URL=postgresql://user:password@host:port/database?pgbouncer=true&connect_timeout=15
POSTGRES_URL_NON_POOLING=postgresql://user:password@host:port/database
POSTGRES_USER=your-postgres-user
POSTGRES_PASSWORD=your-postgres-password
POSTGRES_DATABASE=your-database-name
POSTGRES_HOST=your-postgres-host
SUPABASE_JWT_SECRET=your-jwt-secret-here
SUPABASE_ANON_KEY=your-anon-key-here
\`\`\`

**–ü–æ—á–µ–º—É –Ω–µ –Ω—É–∂–Ω–æ?**
- Supabase –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç —Å–≤–æ–π —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—ã–π API
- –ú—ã –∏—Å–ø–æ–ª—å–∑—É–µ–º Supabase SDK, –∞ –Ω–µ –ø—Ä—è–º–æ–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ PostgreSQL
- –í—Å–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ —Å –ë–î –∏–¥—É—Ç —á–µ—Ä–µ–∑ Supabase REST API

## ‚úÖ –ù–£–ñ–ù–û –∑–∞–ø–æ–ª–Ω–∏—Ç—å —Ç–æ–ª—å–∫–æ —ç—Ç–∏ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ:

### 1. Supabase –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ (–û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–û):
\`\`\`env
NEXT_PUBLIC_SUPABASE_URL=https://your-project.supabase.co
NEXT_PUBLIC_SUPABASE_ANON_KEY=eyJhbGciOiJIUzI1NiIs...
SUPABASE_SERVICE_ROLE_KEY=eyJhbGciOiJIUzI1NiIs...
\`\`\`

### 2. Telegram –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ (–û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–û):
\`\`\`env
TELEGRAM_BOT_TOKEN=123456789:AAH...
ADMIN_USER_ID=123456789
ADMIN_CHAT_ID=123456789
\`\`\`

### 3. App –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ (–û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–û):
\`\`\`env
NEXT_PUBLIC_APP_URL=http://localhost:3000
NEXTAUTH_SECRET=your-secret-here
\`\`\`

## üìã –ü–æ—à–∞–≥–æ–≤–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è:

### –®–∞–≥ 1: –°–æ–∑–¥–∞–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞ Supabase
1. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –Ω–∞ https://supabase.com
2. –ù–∞–∂–º–∏—Ç–µ "Start your project"
3. –í–æ–π–¥–∏—Ç–µ —á–µ—Ä–µ–∑ GitHub
4. –ù–∞–∂–º–∏—Ç–µ "New Project"
5. –ó–∞–ø–æ–ª–Ω–∏—Ç–µ:
   - **Name:** `telegram-stars-bot`
   - **Database Password:** –ü—Ä–∏–¥—É–º–∞–π—Ç–µ –ø–∞—Ä–æ–ª—å (–∑–∞–ø–æ–º–Ω–∏—Ç–µ –µ–≥–æ!)
   - **Region:** –í—ã–±–µ—Ä–∏—Ç–µ –±–ª–∏–∂–∞–π—à–∏–π –∫ –≤–∞–º
6. –ù–∞–∂–º–∏—Ç–µ "Create new project"
7. –ñ–¥–∏—Ç–µ 2-3 –º–∏–Ω—É—Ç—ã –ø–æ–∫–∞ –ø—Ä–æ–µ–∫—Ç —Å–æ–∑–¥–∞–µ—Ç—Å—è

### –®–∞–≥ 2: –ü–æ–ª—É—á–µ–Ω–∏–µ API –∫–ª—é—á–µ–π
1. –í –≤–∞—à–µ–º –ø—Ä–æ–µ–∫—Ç–µ –ø–µ—Ä–µ–π–¥–∏—Ç–µ –≤ **Settings** (‚öôÔ∏è)
2. –í—ã–±–µ—Ä–∏—Ç–µ **API** –≤ –ª–µ–≤–æ–º –º–µ–Ω—é
3. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ –¥–∞–Ω–Ω—ã–µ:

**Project URL:**
\`\`\`
https://abcdefghijklmnop.supabase.co
\`\`\`
–í—Å—Ç–∞–≤—å—Ç–µ –≤ `NEXT_PUBLIC_SUPABASE_URL`

**anon public key:**
\`\`\`
eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImFiY2RlZmdoaWprbG1ub3AiLCJyb2xlIjoiYW5vbiIsImlhdCI6MTY5...
\`\`\`
–í—Å—Ç–∞–≤—å—Ç–µ –≤ `NEXT_PUBLIC_SUPABASE_ANON_KEY`

**service_role secret key:**
\`\`\`
eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImFiY2RlZmdoaWprbG1ub3AiLCJyb2xlIjoic2VydmljZV9yb2xlIiwiaWF0Ijo...
\`\`\`
–í—Å—Ç–∞–≤—å—Ç–µ –≤ `SUPABASE_SERVICE_ROLE_KEY`

### –®–∞–≥ 3: –°–æ–∑–¥–∞–Ω–∏–µ —Ç–∞–±–ª–∏—Ü
1. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ **SQL Editor**
2. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ —Ñ–∞–π–ª–∞ `scripts/create-database.sql`
3. –í—Å—Ç–∞–≤—å—Ç–µ –≤ —Ä–µ–¥–∞–∫—Ç–æ—Ä –∏ –Ω–∞–∂–º–∏—Ç–µ **Run**

–ò–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ **Table Editor** –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è —Ç–∞–±–ª–∏—Ü –≤—Ä—É—á–Ω—É—é.

### –®–∞–≥ 4: –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è
1. –ó–∞–ø—É—Å—Ç–∏—Ç–µ –ø—Ä–æ–µ–∫—Ç: `npm run dev`
2. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –Ω–∞ http://localhost:3000/test-supabase
3. –í—Å–µ —Ç–µ—Å—Ç—ã –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –∑–µ–ª—ë–Ω—ã–º–∏ ‚úÖ

## üîç –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏:

### –ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–π .env —Ñ–∞–π–ª:
\`\`\`env
# Supabase
NEXT_PUBLIC_SUPABASE_URL=https://your-project.supabase.co
NEXT_PUBLIC_SUPABASE_ANON_KEY=eyJhbGciOiJIUzI1NiIs...
SUPABASE_SERVICE_ROLE_KEY=eyJhbGciOiJIUzI1NiIs...

# Telegram
TELEGRAM_BOT_TOKEN=123456789:AAH...
ADMIN_USER_ID=123456789
ADMIN_CHAT_ID=123456789

# App
NEXT_PUBLIC_APP_URL=http://localhost:3000
NEXTAUTH_SECRET=your-secret
NODE_ENV=development
\`\`\`

## ‚ùì –ß–∞—Å—Ç–æ –∑–∞–¥–∞–≤–∞–µ–º—ã–µ –≤–æ–ø—Ä–æ—Å—ã:

**Q: –ù—É–∂–Ω–æ –ª–∏ –∑–∞–ø–æ–ª–Ω—è—Ç—å POSTGRES_* –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ?**
A: –ù–ï–¢! –≠—Ç–∏ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –Ω—É–∂–Ω—ã —Ç–æ–ª—å–∫–æ –¥–ª—è –ø—Ä—è–º–æ–≥–æ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ PostgreSQL. –ü—Ä–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏ Supabase –æ–Ω–∏ –Ω–µ –Ω—É–∂–Ω—ã.

**Q: –ì–¥–µ –≤–∑—è—Ç—å Database Password?**
A: –≠—Ç–æ—Ç –ø–∞—Ä–æ–ª—å –≤—ã —Å–æ–∑–¥–∞–µ—Ç–µ –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –ø—Ä–æ–µ–∫—Ç–∞ Supabase. –û–Ω –Ω—É–∂–µ–Ω —Ç–æ–ª—å–∫–æ –¥–ª—è –ø—Ä—è–º–æ–≥–æ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ –ë–î, –∫–æ—Ç–æ—Ä–æ–µ –º—ã –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ–º.

**Q: –ß—Ç–æ –¥–µ–ª–∞—Ç—å –µ—Å–ª–∏ —Ç–µ—Å—Ç—ã –Ω–µ –ø—Ä–æ—Ö–æ–¥—è—Ç?**
A: 
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—Ä–∞–≤–∏–ª—å–Ω–æ—Å—Ç—å URL –∏ –∫–ª—é—á–µ–π
2. –£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ –ø—Ä–æ–µ–∫—Ç Supabase –ø–æ–ª–Ω–æ—Å—Ç—å—é —Å–æ–∑–¥–∞–Ω
3. –í—ã–ø–æ–ª–Ω–∏—Ç–µ SQL —Å–∫—Ä–∏–ø—Ç –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è —Ç–∞–±–ª–∏—Ü
4. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ

**Q: –ë–µ–∑–æ–ø–∞—Å–Ω–æ –ª–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å ANON_KEY –≤ –±—Ä–∞—É–∑–µ—Ä–µ?**
A: –î–∞, anon key –ø—Ä–µ–¥–Ω–∞–∑–Ω–∞—á–µ–Ω –¥–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –≤ –±—Ä–∞—É–∑–µ—Ä–µ. –û–Ω –∏–º–µ–µ—Ç –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω—ã–µ –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞ —á–µ—Ä–µ–∑ Row Level Security (RLS).

## üöÄ –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏:

–ü–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–π –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ Supabase:
1. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ Telegram –±–æ—Ç–∞ —á–µ—Ä–µ–∑ @BotFather
2. –ü–æ–ª—É—á–∏—Ç–µ –≤–∞—à User ID —á–µ—Ä–µ–∑ @userinfobot
3. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –Ω–∞ `/admin` –¥–ª—è –¥–æ—Å—Ç—É–ø–∞ –∫ –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª–∏
4. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ webhook —á–µ—Ä–µ–∑ `/admin/setup`
